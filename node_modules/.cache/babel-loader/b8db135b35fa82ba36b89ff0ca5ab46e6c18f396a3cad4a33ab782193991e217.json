{"ast":null,"code":"import{useState,useEffect,useContext,createContext}from'react';import{auth,supabase}from'../config/supabase';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext({});export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth debe ser usado dentro de un AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Obtener sesión inicial\nconst getInitialSession=async()=>{try{var _session$user;const{data:{session}}=await supabase.auth.getSession();setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);}catch(error){console.error('Error al obtener sesión inicial:',error);}finally{setLoading(false);}};getInitialSession();// Escuchar cambios de autenticación\nconst{data:{subscription}}=auth.onAuthStateChange(async(event,session)=>{var _session$user2;setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);setLoading(false);});return()=>subscription.unsubscribe();},[]);const signIn=async(email,password)=>{setLoading(true);try{const result=await auth.signIn(email,password);return result;}finally{setLoading(false);}};const signUp=async(email,password,userData)=>{setLoading(true);try{const result=await auth.signUp(email,password,userData);return result;}finally{setLoading(false);}};const signOut=async()=>{setLoading(true);try{const result=await auth.signOut();setUser(null);return result;}finally{setLoading(false);}};const value={user,loading,signIn,signUp,signOut,isAuthenticated:!!user};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["useState","useEffect","useContext","createContext","auth","supabase","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","loading","setLoading","getInitialSession","_session$user","data","session","getSession","error","console","subscription","onAuthStateChange","event","_session$user2","unsubscribe","signIn","email","password","result","signUp","userData","signOut","value","isAuthenticated","Provider"],"sources":["C:/xampp/htdocs/GestorOficial/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect, useContext, createContext } from 'react'\nimport { auth, supabase } from '../config/supabase'\n\nconst AuthContext = createContext({})\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error('useAuth debe ser usado dentro de un AuthProvider')\n  }\n  return context\n}\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Obtener sesión inicial\n    const getInitialSession = async () => {\n      try {\n        const { data: { session } } = await supabase.auth.getSession()\n        setUser(session?.user ?? null)\n      } catch (error) {\n        console.error('Error al obtener sesión inicial:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    getInitialSession()\n\n    // Escuchar cambios de autenticación\n    const { data: { subscription } } = auth.onAuthStateChange(async (event, session) => {\n      setUser(session?.user ?? null)\n      setLoading(false)\n    })\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  const signIn = async (email, password) => {\n    setLoading(true)\n    try {\n      const result = await auth.signIn(email, password)\n      return result\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signUp = async (email, password, userData) => {\n    setLoading(true)\n    try {\n      const result = await auth.signUp(email, password, userData)\n      return result\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signOut = async () => {\n    setLoading(true)\n    try {\n      const result = await auth.signOut()\n      setUser(null)\n      return result\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const value = {\n    user,\n    loading,\n    signIn,\n    signUp,\n    signOut,\n    isAuthenticated: !!user\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}