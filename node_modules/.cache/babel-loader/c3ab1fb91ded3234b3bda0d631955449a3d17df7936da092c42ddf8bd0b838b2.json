{"ast":null,"code":"import React,{useState,useEffect}from'react';import{database,supabase}from'../config/supabase';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InventoryManagement=()=>{const[inventory,setInventory]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[selectedFamily,setSelectedFamily]=useState('');const[selectedSubfamily,setSelectedSubfamily]=useState('');const[families,setFamilies]=useState([]);const[subfamilies,setSubfamilies]=useState([]);const[editingItem,setEditingItem]=useState(null);const[editForm,setEditForm]=useState({ingredient_name:'',family_id:'',subfamily_id:'',supplier_id:'',quantity:'',purchase_price:'',expiry_date:'',batch_number:''});const[showNewProductModal,setShowNewProductModal]=useState(false);const[newProduct,setNewProduct]=useState({ingredient_name:'',description:'',family_id:'',subfamily_id:'',quantity:'',purchase_price:'',expiry_date:'',batch_number:'',supplier_id:'',unit_measure:'',alergeno_gluten:0,alergeno_crustaceos:0,alergeno_huevos:0,alergeno_pescado:0,alergeno_cacahuetes:0,alergeno_soja:0,alergeno_leche:0,alergeno_frutos_cascara:0,alergeno_apio:0,alergeno_mostaza:0,alergeno_sesamo:0,alergeno_dioxido_azufre_sulfitos:0,alergeno_altramuces:0,alergeno_moluscos:0});const[suppliers,setSuppliers]=useState([]);const[unitMeasures]=useState(['kg','g','litro','ml','unidades','paquetes','latas','botellas','cajas']);useEffect(()=>{fetchInventory();fetchFamilies();fetchSuppliers();},[]);const fetchInventory=async()=>{try{const result=await database.getInventory();if(result.success){setInventory(result.data);}else{setError(result.error);}setLoading(false);}catch(err){console.error('Error al cargar el inventario:',err);setError('Error al cargar el inventario');setLoading(false);}};const fetchFamilies=async()=>{try{const{data,error}=await supabase.from('inventory_families').select('*').order('name');if(error)throw error;setFamilies(data);}catch(err){console.error('Error al cargar las familias:',err);}};const fetchSuppliers=async()=>{try{const result=await database.getSuppliers();if(result.success){setSuppliers(result.data);}}catch(err){console.error('Error al cargar los proveedores:',err);}};const handleFamilyChange=async e=>{const familyId=e.target.value;setSelectedFamily(familyId);setSelectedSubfamily('');setNewProduct(prev=>({...prev,family_id:familyId,subfamily_id:''}));if(familyId){try{console.log('Cargando subfamilias para familia:',familyId);const{data,error}=await supabase.from('inventory_subfamilies').select('*').eq('family_id',familyId).order('name');if(error)throw error;console.log('Respuesta de subfamilias:',data);setSubfamilies(data||[]);}catch(err){console.error('Error al cargar las subfamilias:',err);setError('Error al cargar las subfamilias');setSubfamilies([]);}}else{setSubfamilies([]);}};const handleSubfamilyChange=e=>{const subfamilyId=e.target.value;setSelectedSubfamily(subfamilyId);setNewProduct(prev=>({...prev,subfamily_id:subfamilyId}));};const handleEdit=item=>{setEditingItem(item.id);setEditForm({ingredient_name:item.ingredient_name,family_id:item.family_id,subfamily_id:item.subfamily_id,supplier_id:item.supplier_id,quantity:item.quantity,purchase_price:item.purchase_price,expiry_date:item.expiry_date,batch_number:item.batch_number});if(item.family_id){fetchSubfamiliesForEdit(item.family_id);}};const fetchSubfamiliesForEdit=async familyId=>{try{const{data,error}=await supabase.from('inventory_subfamilies').select('*').eq('family_id',familyId).order('name');if(error)throw error;setSubfamilies(data||[]);}catch(err){console.error('Error al cargar las subfamilias:',err);setSubfamilies([]);}};const handleEditFamilyChange=async e=>{const familyId=e.target.value;setEditForm(prev=>({...prev,family_id:familyId,subfamily_id:''}));if(familyId){await fetchSubfamiliesForEdit(familyId);}else{setSubfamilies([]);}};const handleCancelEdit=()=>{setEditingItem(null);setEditForm({ingredient_name:'',family_id:'',subfamily_id:'',supplier_id:'',quantity:'',purchase_price:'',expiry_date:'',batch_number:''});};const handleSaveEdit=async()=>{try{const{error}=await supabase.from('inventory').update({family_id:editForm.family_id,subfamily_id:editForm.subfamily_id,quantity:editForm.quantity,purchase_price:editForm.purchase_price,expiry_date:editForm.expiry_date,batch_number:editForm.batch_number}).eq('id',editingItem);if(error)throw error;await fetchInventory();setEditingItem(null);}catch(err){console.error('Error al actualizar el inventario:',err);setError('Error al actualizar el inventario');}};const handleInputChange=e=>{const{name,value}=e.target;setEditForm(prev=>({...prev,[name]:value}));};const handleDelete=async id=>{if(window.confirm('¿Estás seguro de que deseas eliminar este item del inventario?')){try{const{error}=await supabase.from('inventory').delete().eq('id',id);if(error)throw error;await fetchInventory();}catch(err){console.error('Error al eliminar el inventario:',err);setError('Error al eliminar el inventario');}}};const handleNewProductChange=e=>{const{name,value}=e.target;setNewProduct(prev=>({...prev,[name]:value}));};const handleNewProductSubmit=async e=>{e.preventDefault();try{// Primero crear el ingrediente\nconst ingredientData={name:newProduct.ingredient_name,description:newProduct.description,category_id:1,// Por defecto categoría 1\nbase_price:parseFloat(newProduct.purchase_price)||0,unit_measure:newProduct.unit_measure,min_stock_level:10,// Valor por defecto\nactive:true};const{data:ingredient,error:ingredientError}=await supabase.from('ingredients').insert([ingredientData]).select().single();if(ingredientError)throw ingredientError;// Luego crear el item de inventario\nconst inventoryData={ingredient_id:ingredient.id,family_id:parseInt(newProduct.family_id),subfamily_id:newProduct.subfamily_id?parseInt(newProduct.subfamily_id):null,quantity:parseFloat(newProduct.quantity),purchase_price:parseFloat(newProduct.purchase_price),expiry_date:newProduct.expiry_date,batch_number:newProduct.batch_number};const{error:inventoryError}=await supabase.from('inventory').insert([inventoryData]);if(inventoryError)throw inventoryError;await fetchInventory();setShowNewProductModal(false);setNewProduct({ingredient_name:'',description:'',family_id:'',subfamily_id:'',quantity:'',purchase_price:'',expiry_date:'',batch_number:'',supplier_id:'',unit_measure:'',alergeno_gluten:0,alergeno_crustaceos:0,alergeno_huevos:0,alergeno_pescado:0,alergeno_cacahuetes:0,alergeno_soja:0,alergeno_leche:0,alergeno_frutos_cascara:0,alergeno_apio:0,alergeno_mostaza:0,alergeno_sesamo:0,alergeno_dioxido_azufre_sulfitos:0,alergeno_altramuces:0,alergeno_moluscos:0});}catch(err){console.error('Error al crear el producto:',err);setError('Error al crear el producto');}};const getAllergens=item=>{const allergens=[];if(item.alergeno_gluten===1)allergens.push('alerg_gluten.png');if(item.alergeno_crustaceos===1)allergens.push('alerg_crustaceos.png');if(item.alergeno_huevos===1)allergens.push('alerg_huevos.png');if(item.alergeno_pescado===1)allergens.push('alerg_pescado.png');if(item.alergeno_cacahuetes===1)allergens.push('alerg_cacahuetes.png');if(item.alergeno_soja===1)allergens.push('alerg_soja.png');if(item.alergeno_leche===1)allergens.push('alerg_leche.png');if(item.alergeno_frutos_cascara===1)allergens.push('alerg_frutos.png');if(item.alergeno_apio===1)allergens.push('alerg_apio.png');if(item.alergeno_mostaza===1)allergens.push('alerg_mostaza.png');if(item.alergeno_sesamo===1)allergens.push('alerg_sesamo.png');if(item.alergeno_dioxido_azufre_sulfitos===1)allergens.push('alerg_sulfitos.png');if(item.alergeno_altramuces===1)allergens.push('alerg_altramuces.png');if(item.alergeno_moluscos===1)allergens.push('alerg_moluscos.png');if(allergens.length===0){return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Sin al\\xE9rgenos\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:allergens.map((allergen,index)=>/*#__PURE__*/_jsx(\"img\",{src:`/alerg_${allergen.split('_')[1]}`,alt:allergen.split('_')[1].replace('.png',''),className:\"w-6 h-6 object-contain\",title:allergen.split('_')[1].replace('.png','')},index))});};const filteredInventory=inventory.filter(item=>{var _item$ingredients;const ingredientName=((_item$ingredients=item.ingredients)===null||_item$ingredients===void 0?void 0:_item$ingredients.name)||'';const matchesSearch=ingredientName.toLowerCase().includes(searchTerm.toLowerCase());const matchesFamily=!selectedFamily||item.family_id===parseInt(selectedFamily);const matchesSubfamily=!selectedSubfamily||item.subfamily_id===parseInt(selectedSubfamily);return matchesSearch&&matchesFamily&&matchesSubfamily;});if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:\"Cargando...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewProductModal(true),className:\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700\",children:\"Nuevo Producto\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar producto...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedFamily,onChange:handleFamilyChange,className:\"border border-gray-300 rounded-md px-4 py-2 focus:ring-indigo-500 focus:border-indigo-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las familias\"}),families.map(family=>/*#__PURE__*/_jsx(\"option\",{value:family.id,children:family.name},family.id))]}),/*#__PURE__*/_jsxs(\"select\",{value:selectedSubfamily,onChange:handleSubfamilyChange,className:\"border border-gray-300 rounded-md px-4 py-2 focus:ring-indigo-500 focus:border-indigo-500\",disabled:!selectedFamily,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las subfamilias\"}),subfamilies.map(subfamily=>/*#__PURE__*/_jsx(\"option\",{value:subfamily.id,children:subfamily.name},subfamily.id))]})]})]}),showNewProductModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-0 bg-white p-6 border-b\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Nuevo Producto\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewProductModal(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleNewProductSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Nombre del Ingrediente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"ingredient_name\",value:newProduct.ingredient_name,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:newProduct.description,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Familia\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"family_id\",value:newProduct.family_id,onChange:handleFamilyChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar familia\"}),families.map(family=>/*#__PURE__*/_jsx(\"option\",{value:family.id,children:family.name},family.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Subfamilia\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"subfamily_id\",value:newProduct.subfamily_id,onChange:handleSubfamilyChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",disabled:!newProduct.family_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar subfamilia\"}),subfamilies.map(subfamily=>/*#__PURE__*/_jsx(\"option\",{value:subfamily.id,children:subfamily.name},subfamily.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Proveedor\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"supplier_id\",value:newProduct.supplier_id,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar proveedor\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Cantidad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",value:newProduct.quantity,onChange:handleNewProductChange,className:\"mt-1 block w-24 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true,min:\"0\",step:\"0.01\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"unit_measure\",value:newProduct.unit_measure,onChange:handleNewProductChange,className:\"mt-1 block w-16 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unidad\"}),unitMeasures.map((unit,index)=>/*#__PURE__*/_jsx(\"option\",{value:unit,children:unit},index))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Precio de Compra\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"purchase_price\",value:newProduct.purchase_price,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true,min:\"0\",step:\"0.01\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Fecha de Caducidad\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"expiry_date\",value:newProduct.expiry_date,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"N\\xFAmero de Lote\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"batch_number\",value:newProduct.batch_number,onChange:handleNewProductChange,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Al\\xE9rgenos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_gluten\",checked:newProduct.alergeno_gluten===1,onChange:e=>{console.log('Checkbox gluten cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_gluten:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Gluten\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_crustaceos\",checked:newProduct.alergeno_crustaceos===1,onChange:e=>{console.log('Checkbox crustaceos cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_crustaceos:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Crust\\xE1ceos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_huevos\",checked:newProduct.alergeno_huevos===1,onChange:e=>{console.log('Checkbox huevos cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_huevos:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Huevos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_pescado\",checked:newProduct.alergeno_pescado===1,onChange:e=>{console.log('Checkbox pescado cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_pescado:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Pescado\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_cacahuetes\",checked:newProduct.alergeno_cacahuetes===1,onChange:e=>{console.log('Checkbox cacahuetes cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_cacahuetes:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Cacahuetes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_soja\",checked:newProduct.alergeno_soja===1,onChange:e=>{console.log('Checkbox soja cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_soja:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Soja\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_leche\",checked:newProduct.alergeno_leche===1,onChange:e=>{console.log('Checkbox leche cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_leche:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Leche\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_frutos_cascara\",checked:newProduct.alergeno_frutos_cascara===1,onChange:e=>{console.log('Checkbox frutos cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_frutos_cascara:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Frutos de c\\xE1scara\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_apio\",checked:newProduct.alergeno_apio===1,onChange:e=>{console.log('Checkbox apio cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_apio:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Apio\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_mostaza\",checked:newProduct.alergeno_mostaza===1,onChange:e=>{console.log('Checkbox mostaza cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_mostaza:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Mostaza\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_sesamo\",checked:newProduct.alergeno_sesamo===1,onChange:e=>{console.log('Checkbox sesamo cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_sesamo:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"S\\xE9samo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_dioxido_azufre_sulfitos\",checked:newProduct.alergeno_dioxido_azufre_sulfitos===1,onChange:e=>{console.log('Checkbox sulfitos cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_dioxido_azufre_sulfitos:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Di\\xF3xido de azufre y sulfitos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_altramuces\",checked:newProduct.alergeno_altramuces===1,onChange:e=>{console.log('Checkbox altramuces cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_altramuces:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Altramuces\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"alergeno_moluscos\",checked:newProduct.alergeno_moluscos===1,onChange:e=>{console.log('Checkbox moluscos cambiado:',e.target.checked);setNewProduct(prev=>({...prev,alergeno_moluscos:e.target.checked?1:0}));},className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 block text-sm text-gray-900\",children:\"Moluscos\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNewProductModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\",children:\"Guardar\"})]})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-md rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Producto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell\",children:\"Familia\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell\",children:\"Subfamilia\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell\",children:\"Proveedor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell\",children:\"Precio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell\",children:\"Caducidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden xl:table-cell\",children:\"Lote\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Al\\xE9rgenos\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredInventory.map(item=>{var _item$ingredients2,_item$inventory_famil,_item$inventory_subfa,_item$inventory_famil2,_item$inventory_subfa2,_item$ingredients3,_item$ingredients4;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:editingItem===item.id?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"ingredient_name\",value:editForm.ingredient_name,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-900\",children:((_item$ingredients2=item.ingredients)===null||_item$ingredients2===void 0?void 0:_item$ingredients2.name)||'N/A'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 md:hidden\",children:[(_item$inventory_famil=item.inventory_families)===null||_item$inventory_famil===void 0?void 0:_item$inventory_famil.name,\" \",(_item$inventory_subfa=item.inventory_subfamilies)!==null&&_item$inventory_subfa!==void 0&&_item$inventory_subfa.name?`- ${item.inventory_subfamilies.name}`:'']})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden md:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsxs(\"select\",{name:\"family_id\",value:editForm.family_id,onChange:handleEditFamilyChange,className:\"w-full px-2 py-1 border rounded text-xs\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar familia\"}),families.map(family=>/*#__PURE__*/_jsx(\"option\",{value:family.id,children:family.name},family.id))]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-900\",children:((_item$inventory_famil2=item.inventory_families)===null||_item$inventory_famil2===void 0?void 0:_item$inventory_famil2.name)||'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden lg:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsxs(\"select\",{name:\"subfamily_id\",value:editForm.subfamily_id,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\",disabled:!editForm.family_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar subfamilia\"}),subfamilies.map(subfamily=>/*#__PURE__*/_jsx(\"option\",{value:subfamily.id,children:subfamily.name},subfamily.id))]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-900\",children:((_item$inventory_subfa2=item.inventory_subfamilies)===null||_item$inventory_subfa2===void 0?void 0:_item$inventory_subfa2.name)||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden md:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsxs(\"select\",{name:\"supplier_id\",value:editForm.supplier_id,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar proveedor\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-900\",children:\"N/A\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:editingItem===item.id?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",value:editForm.quantity,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\",min:\"0\",step:\"0.01\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:((_item$ingredients3=item.ingredients)===null||_item$ingredients3===void 0?void 0:_item$ingredients3.unit_measure)||'N/A'})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-900\",children:[item.quantity,\" \",((_item$ingredients4=item.ingredients)===null||_item$ingredients4===void 0?void 0:_item$ingredients4.unit_measure)||'N/A']})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden sm:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"purchase_price\",value:editForm.purchase_price,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\",min:\"0\",step:\"0.01\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-900\",children:[item.purchase_price,\" \\u20AC\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden lg:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"expiry_date\",value:editForm.expiry_date,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\"}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-900\",children:new Date(item.expiry_date).toLocaleDateString()})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap hidden xl:table-cell\",children:editingItem===item.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"batch_number\",value:editForm.batch_number,onChange:handleInputChange,className:\"w-full px-2 py-1 border rounded text-xs\"}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-900\",children:item.batch_number})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:getAllergens(item)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-right text-xs font-medium\",children:editingItem===item.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveEdit,className:\"text-green-600 hover:text-green-900 mr-2\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelEdit,className:\"text-gray-600 hover:text-gray-900\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(item),className:\"text-indigo-600 hover:text-indigo-900 mr-2\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id),className:\"text-red-600 hover:text-red-900\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})})]},item.id);})})]})})})]});};export default InventoryManagement;","map":{"version":3,"names":["React","useState","useEffect","database","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InventoryManagement","inventory","setInventory","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedFamily","setSelectedFamily","selectedSubfamily","setSelectedSubfamily","families","setFamilies","subfamilies","setSubfamilies","editingItem","setEditingItem","editForm","setEditForm","ingredient_name","family_id","subfamily_id","supplier_id","quantity","purchase_price","expiry_date","batch_number","showNewProductModal","setShowNewProductModal","newProduct","setNewProduct","description","unit_measure","alergeno_gluten","alergeno_crustaceos","alergeno_huevos","alergeno_pescado","alergeno_cacahuetes","alergeno_soja","alergeno_leche","alergeno_frutos_cascara","alergeno_apio","alergeno_mostaza","alergeno_sesamo","alergeno_dioxido_azufre_sulfitos","alergeno_altramuces","alergeno_moluscos","suppliers","setSuppliers","unitMeasures","fetchInventory","fetchFamilies","fetchSuppliers","result","getInventory","success","data","err","console","from","select","order","getSuppliers","handleFamilyChange","e","familyId","target","value","prev","log","eq","handleSubfamilyChange","subfamilyId","handleEdit","item","id","fetchSubfamiliesForEdit","handleEditFamilyChange","handleCancelEdit","handleSaveEdit","update","handleInputChange","name","handleDelete","window","confirm","delete","handleNewProductChange","handleNewProductSubmit","preventDefault","ingredientData","category_id","base_price","parseFloat","min_stock_level","active","ingredient","ingredientError","insert","single","inventoryData","ingredient_id","parseInt","inventoryError","getAllergens","allergens","push","length","className","children","map","allergen","index","src","split","alt","replace","title","filteredInventory","filter","_item$ingredients","ingredientName","ingredients","matchesSearch","toLowerCase","includes","matchesFamily","matchesSubfamily","onClick","type","placeholder","onChange","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","family","disabled","subfamily","onSubmit","required","rows","supplier","min","step","unit","checked","_item$ingredients2","_item$inventory_famil","_item$inventory_subfa","_item$inventory_famil2","_item$inventory_subfa2","_item$ingredients3","_item$ingredients4","inventory_families","inventory_subfamilies","Date","toLocaleDateString"],"sources":["C:/xampp/htdocs/GestorOficial/src/components/InventoryManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { database, supabase } from '../config/supabase';\n\nconst InventoryManagement = () => {\n  const [inventory, setInventory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedFamily, setSelectedFamily] = useState('');\n  const [selectedSubfamily, setSelectedSubfamily] = useState('');\n  const [families, setFamilies] = useState([]);\n  const [subfamilies, setSubfamilies] = useState([]);\n  const [editingItem, setEditingItem] = useState(null);\n  const [editForm, setEditForm] = useState({\n    ingredient_name: '',\n    family_id: '',\n    subfamily_id: '',\n    supplier_id: '',\n    quantity: '',\n    purchase_price: '',\n    expiry_date: '',\n    batch_number: ''\n  });\n  const [showNewProductModal, setShowNewProductModal] = useState(false);\n  const [newProduct, setNewProduct] = useState({\n    ingredient_name: '',\n    description: '',\n    family_id: '',\n    subfamily_id: '',\n    quantity: '',\n    purchase_price: '',\n    expiry_date: '',\n    batch_number: '',\n    supplier_id: '',\n    unit_measure: '',\n    alergeno_gluten: 0,\n    alergeno_crustaceos: 0,\n    alergeno_huevos: 0,\n    alergeno_pescado: 0,\n    alergeno_cacahuetes: 0,\n    alergeno_soja: 0,\n    alergeno_leche: 0,\n    alergeno_frutos_cascara: 0,\n    alergeno_apio: 0,\n    alergeno_mostaza: 0,\n    alergeno_sesamo: 0,\n    alergeno_dioxido_azufre_sulfitos: 0,\n    alergeno_altramuces: 0,\n    alergeno_moluscos: 0\n  });\n  const [suppliers, setSuppliers] = useState([]);\n  const [unitMeasures] = useState([\n    'kg',\n    'g',\n    'litro',\n    'ml',\n    'unidades',\n    'paquetes',\n    'latas',\n    'botellas',\n    'cajas'\n  ]);\n\n  useEffect(() => {\n    fetchInventory();\n    fetchFamilies();\n    fetchSuppliers();\n  }, []);\n\n  const fetchInventory = async () => {\n    try {\n      const result = await database.getInventory();\n      if (result.success) {\n        setInventory(result.data);\n      } else {\n        setError(result.error);\n      }\n      setLoading(false);\n    } catch (err) {\n      console.error('Error al cargar el inventario:', err);\n      setError('Error al cargar el inventario');\n      setLoading(false);\n    }\n  };\n\n  const fetchFamilies = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('inventory_families')\n        .select('*')\n        .order('name');\n      \n      if (error) throw error;\n      setFamilies(data);\n    } catch (err) {\n      console.error('Error al cargar las familias:', err);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const result = await database.getSuppliers();\n      if (result.success) {\n        setSuppliers(result.data);\n      }\n    } catch (err) {\n      console.error('Error al cargar los proveedores:', err);\n    }\n  };\n\n  const handleFamilyChange = async (e) => {\n    const familyId = e.target.value;\n    setSelectedFamily(familyId);\n    setSelectedSubfamily('');\n    setNewProduct(prev => ({\n      ...prev,\n      family_id: familyId,\n      subfamily_id: ''\n    }));\n    \n    if (familyId) {\n      try {\n        console.log('Cargando subfamilias para familia:', familyId);\n        const { data, error } = await supabase\n          .from('inventory_subfamilies')\n          .select('*')\n          .eq('family_id', familyId)\n          .order('name');\n        \n        if (error) throw error;\n        console.log('Respuesta de subfamilias:', data);\n        setSubfamilies(data || []);\n      } catch (err) {\n        console.error('Error al cargar las subfamilias:', err);\n        setError('Error al cargar las subfamilias');\n        setSubfamilies([]);\n      }\n    } else {\n      setSubfamilies([]);\n    }\n  };\n\n  const handleSubfamilyChange = (e) => {\n    const subfamilyId = e.target.value;\n    setSelectedSubfamily(subfamilyId);\n    setNewProduct(prev => ({\n      ...prev,\n      subfamily_id: subfamilyId\n    }));\n  };\n\n  const handleEdit = (item) => {\n    setEditingItem(item.id);\n    setEditForm({\n      ingredient_name: item.ingredient_name,\n      family_id: item.family_id,\n      subfamily_id: item.subfamily_id,\n      supplier_id: item.supplier_id,\n      quantity: item.quantity,\n      purchase_price: item.purchase_price,\n      expiry_date: item.expiry_date,\n      batch_number: item.batch_number\n    });\n    if (item.family_id) {\n      fetchSubfamiliesForEdit(item.family_id);\n    }\n  };\n\n  const fetchSubfamiliesForEdit = async (familyId) => {\n    try {\n      const { data, error } = await supabase\n        .from('inventory_subfamilies')\n        .select('*')\n        .eq('family_id', familyId)\n        .order('name');\n      \n      if (error) throw error;\n      setSubfamilies(data || []);\n    } catch (err) {\n      console.error('Error al cargar las subfamilias:', err);\n      setSubfamilies([]);\n    }\n  };\n\n  const handleEditFamilyChange = async (e) => {\n    const familyId = e.target.value;\n    setEditForm(prev => ({\n      ...prev,\n      family_id: familyId,\n      subfamily_id: ''\n    }));\n    \n    if (familyId) {\n      await fetchSubfamiliesForEdit(familyId);\n    } else {\n      setSubfamilies([]);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditingItem(null);\n    setEditForm({\n      ingredient_name: '',\n      family_id: '',\n      subfamily_id: '',\n      supplier_id: '',\n      quantity: '',\n      purchase_price: '',\n      expiry_date: '',\n      batch_number: ''\n    });\n  };\n\n  const handleSaveEdit = async () => {\n    try {\n      const { error } = await supabase\n        .from('inventory')\n        .update({\n          family_id: editForm.family_id,\n          subfamily_id: editForm.subfamily_id,\n          quantity: editForm.quantity,\n          purchase_price: editForm.purchase_price,\n          expiry_date: editForm.expiry_date,\n          batch_number: editForm.batch_number\n        })\n        .eq('id', editingItem);\n      \n      if (error) throw error;\n      await fetchInventory();\n      setEditingItem(null);\n    } catch (err) {\n      console.error('Error al actualizar el inventario:', err);\n      setError('Error al actualizar el inventario');\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setEditForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleDelete = async (id) => {\n    if (window.confirm('¿Estás seguro de que deseas eliminar este item del inventario?')) {\n      try {\n        const { error } = await supabase\n          .from('inventory')\n          .delete()\n          .eq('id', id);\n        \n        if (error) throw error;\n        await fetchInventory();\n      } catch (err) {\n        console.error('Error al eliminar el inventario:', err);\n        setError('Error al eliminar el inventario');\n      }\n    }\n  };\n\n  const handleNewProductChange = (e) => {\n    const { name, value } = e.target;\n    setNewProduct(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleNewProductSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      // Primero crear el ingrediente\n      const ingredientData = {\n        name: newProduct.ingredient_name,\n        description: newProduct.description,\n        category_id: 1, // Por defecto categoría 1\n        base_price: parseFloat(newProduct.purchase_price) || 0,\n        unit_measure: newProduct.unit_measure,\n        min_stock_level: 10, // Valor por defecto\n        active: true\n      };\n\n      const { data: ingredient, error: ingredientError } = await supabase\n        .from('ingredients')\n        .insert([ingredientData])\n        .select()\n        .single();\n\n      if (ingredientError) throw ingredientError;\n\n      // Luego crear el item de inventario\n      const inventoryData = {\n        ingredient_id: ingredient.id,\n        family_id: parseInt(newProduct.family_id),\n        subfamily_id: newProduct.subfamily_id ? parseInt(newProduct.subfamily_id) : null,\n        quantity: parseFloat(newProduct.quantity),\n        purchase_price: parseFloat(newProduct.purchase_price),\n        expiry_date: newProduct.expiry_date,\n        batch_number: newProduct.batch_number\n      };\n\n      const { error: inventoryError } = await supabase\n        .from('inventory')\n        .insert([inventoryData]);\n\n      if (inventoryError) throw inventoryError;\n\n      await fetchInventory();\n      setShowNewProductModal(false);\n      setNewProduct({\n        ingredient_name: '',\n        description: '',\n        family_id: '',\n        subfamily_id: '',\n        quantity: '',\n        purchase_price: '',\n        expiry_date: '',\n        batch_number: '',\n        supplier_id: '',\n        unit_measure: '',\n        alergeno_gluten: 0,\n        alergeno_crustaceos: 0,\n        alergeno_huevos: 0,\n        alergeno_pescado: 0,\n        alergeno_cacahuetes: 0,\n        alergeno_soja: 0,\n        alergeno_leche: 0,\n        alergeno_frutos_cascara: 0,\n        alergeno_apio: 0,\n        alergeno_mostaza: 0,\n        alergeno_sesamo: 0,\n        alergeno_dioxido_azufre_sulfitos: 0,\n        alergeno_altramuces: 0,\n        alergeno_moluscos: 0\n      });\n    } catch (err) {\n      console.error('Error al crear el producto:', err);\n      setError('Error al crear el producto');\n    }\n  };\n\n  const getAllergens = (item) => {\n    const allergens = [];\n    if (item.alergeno_gluten === 1) allergens.push('alerg_gluten.png');\n    if (item.alergeno_crustaceos === 1) allergens.push('alerg_crustaceos.png');\n    if (item.alergeno_huevos === 1) allergens.push('alerg_huevos.png');\n    if (item.alergeno_pescado === 1) allergens.push('alerg_pescado.png');\n    if (item.alergeno_cacahuetes === 1) allergens.push('alerg_cacahuetes.png');\n    if (item.alergeno_soja === 1) allergens.push('alerg_soja.png');\n    if (item.alergeno_leche === 1) allergens.push('alerg_leche.png');\n    if (item.alergeno_frutos_cascara === 1) allergens.push('alerg_frutos.png');\n    if (item.alergeno_apio === 1) allergens.push('alerg_apio.png');\n    if (item.alergeno_mostaza === 1) allergens.push('alerg_mostaza.png');\n    if (item.alergeno_sesamo === 1) allergens.push('alerg_sesamo.png');\n    if (item.alergeno_dioxido_azufre_sulfitos === 1) allergens.push('alerg_sulfitos.png');\n    if (item.alergeno_altramuces === 1) allergens.push('alerg_altramuces.png');\n    if (item.alergeno_moluscos === 1) allergens.push('alerg_moluscos.png');\n    \n    if (allergens.length === 0) {\n      return <span className=\"text-xs text-gray-500\">Sin alérgenos</span>;\n    }\n    \n    return (\n      <div className=\"flex flex-wrap gap-1\">\n        {allergens.map((allergen, index) => (\n          <img\n            key={index}\n            src={`/alerg_${allergen.split('_')[1]}`}\n            alt={allergen.split('_')[1].replace('.png', '')}\n            className=\"w-6 h-6 object-contain\"\n            title={allergen.split('_')[1].replace('.png', '')}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  const filteredInventory = inventory.filter(item => {\n    const ingredientName = item.ingredients?.name || '';\n    const matchesSearch = ingredientName.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesFamily = !selectedFamily || item.family_id === parseInt(selectedFamily);\n    const matchesSubfamily = !selectedSubfamily || item.subfamily_id === parseInt(selectedSubfamily);\n    return matchesSearch && matchesFamily && matchesSubfamily;\n  });\n\n  if (loading) return <div className=\"flex justify-center items-center h-64\">Cargando...</div>;\n  if (error) return <div className=\"text-red-500 text-center\">{error}</div>;\n\n  return (\n    <div className=\"py-4\">\n      <div className=\"flex flex-col gap-4 mb-4\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"flex gap-2\">\n            <button \n              onClick={() => setShowNewProductModal(true)}\n              className=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700\"\n            >\n              Nuevo Producto\n            </button>\n          </div>\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"Buscar producto...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500\"\n            />\n            <svg\n              className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              />\n            </svg>\n          </div>\n        </div>\n        \n        <div className=\"flex gap-4\">\n          <select\n            value={selectedFamily}\n            onChange={handleFamilyChange}\n            className=\"border border-gray-300 rounded-md px-4 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n          >\n            <option value=\"\">Todas las familias</option>\n            {families.map(family => (\n              <option key={family.id} value={family.id}>{family.name}</option>\n            ))}\n          </select>\n\n          <select\n            value={selectedSubfamily}\n            onChange={handleSubfamilyChange}\n            className=\"border border-gray-300 rounded-md px-4 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            disabled={!selectedFamily}\n          >\n            <option value=\"\">Todas las subfamilias</option>\n            {subfamilies.map(subfamily => (\n              <option key={subfamily.id} value={subfamily.id}>{subfamily.name}</option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Modal para nuevo producto */}\n      {showNewProductModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-white p-6 border-b\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-xl font-semibold\">Nuevo Producto</h2>\n                <button\n                  onClick={() => setShowNewProductModal(false)}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <form onSubmit={handleNewProductSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Nombre del Ingrediente</label>\n                    <input\n                      type=\"text\"\n                      name=\"ingredient_name\"\n                      value={newProduct.ingredient_name}\n                      onChange={handleNewProductChange}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Descripción</label>\n                    <textarea\n                      name=\"description\"\n                      value={newProduct.description}\n                      onChange={handleNewProductChange}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                      rows=\"3\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Familia</label>\n                    <select\n                      name=\"family_id\"\n                      value={newProduct.family_id}\n                      onChange={handleFamilyChange}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                      required\n                    >\n                      <option value=\"\">Seleccionar familia</option>\n                      {families.map(family => (\n                        <option key={family.id} value={family.id}>{family.name}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Subfamilia</label>\n                    <select\n                      name=\"subfamily_id\"\n                      value={newProduct.subfamily_id}\n                      onChange={handleSubfamilyChange}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                      disabled={!newProduct.family_id}\n                    >\n                      <option value=\"\">Seleccionar subfamilia</option>\n                      {subfamilies.map(subfamily => (\n                        <option key={subfamily.id} value={subfamily.id}>{subfamily.name}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Proveedor</label>\n                    <select\n                      name=\"supplier_id\"\n                      value={newProduct.supplier_id}\n                      onChange={handleNewProductChange}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                      required\n                    >\n                      <option value=\"\">Seleccionar proveedor</option>\n                      {suppliers.map(supplier => (\n                        <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Cantidad</label>\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"number\"\n                          name=\"quantity\"\n                          value={newProduct.quantity}\n                          onChange={handleNewProductChange}\n                          className=\"mt-1 block w-24 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                          required\n                          min=\"0\"\n                          step=\"0.01\"\n                        />\n                        <select\n                          name=\"unit_measure\"\n                          value={newProduct.unit_measure}\n                          onChange={handleNewProductChange}\n                          className=\"mt-1 block w-16 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                          required\n                        >\n                          <option value=\"\">Unidad</option>\n                          {unitMeasures.map((unit, index) => (\n                            <option key={index} value={unit}>{unit}</option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Precio de Compra</label>\n                      <input\n                        type=\"number\"\n                        name=\"purchase_price\"\n                        value={newProduct.purchase_price}\n                        onChange={handleNewProductChange}\n                        className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                        required\n                        min=\"0\"\n                        step=\"0.01\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Fecha de Caducidad</label>\n                      <input\n                        type=\"date\"\n                        name=\"expiry_date\"\n                        value={newProduct.expiry_date}\n                        onChange={handleNewProductChange}\n                        className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Número de Lote</label>\n                      <input\n                        type=\"text\"\n                        name=\"batch_number\"\n                        value={newProduct.batch_number}\n                        onChange={handleNewProductChange}\n                        className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Alérgenos</label>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_gluten\"\n                          checked={newProduct.alergeno_gluten === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox gluten cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_gluten: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Gluten</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_crustaceos\"\n                          checked={newProduct.alergeno_crustaceos === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox crustaceos cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_crustaceos: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Crustáceos</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_huevos\"\n                          checked={newProduct.alergeno_huevos === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox huevos cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_huevos: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Huevos</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_pescado\"\n                          checked={newProduct.alergeno_pescado === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox pescado cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_pescado: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Pescado</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_cacahuetes\"\n                          checked={newProduct.alergeno_cacahuetes === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox cacahuetes cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_cacahuetes: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Cacahuetes</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_soja\"\n                          checked={newProduct.alergeno_soja === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox soja cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_soja: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Soja</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_leche\"\n                          checked={newProduct.alergeno_leche === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox leche cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_leche: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Leche</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_frutos_cascara\"\n                          checked={newProduct.alergeno_frutos_cascara === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox frutos cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_frutos_cascara: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Frutos de cáscara</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_apio\"\n                          checked={newProduct.alergeno_apio === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox apio cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_apio: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Apio</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_mostaza\"\n                          checked={newProduct.alergeno_mostaza === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox mostaza cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_mostaza: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Mostaza</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_sesamo\"\n                          checked={newProduct.alergeno_sesamo === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox sesamo cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_sesamo: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Sésamo</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_dioxido_azufre_sulfitos\"\n                          checked={newProduct.alergeno_dioxido_azufre_sulfitos === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox sulfitos cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_dioxido_azufre_sulfitos: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Dióxido de azufre y sulfitos</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_altramuces\"\n                          checked={newProduct.alergeno_altramuces === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox altramuces cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_altramuces: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Altramuces</label>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          name=\"alergeno_moluscos\"\n                          checked={newProduct.alergeno_moluscos === 1}\n                          onChange={(e) => {\n                            console.log('Checkbox moluscos cambiado:', e.target.checked);\n                            setNewProduct(prev => ({\n                              ...prev,\n                              alergeno_moluscos: e.target.checked ? 1 : 0\n                            }));\n                          }}\n                          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                        />\n                        <label className=\"ml-2 block text-sm text-gray-900\">Moluscos</label>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-center space-x-3 mt-6\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowNewProductModal(false)}\n                    className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\n                  >\n                    Cancelar\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n                  >\n                    Guardar\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 text-sm\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Producto\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell\">\n                  Familia\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell\">\n                  Subfamilia\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell\">\n                  Proveedor\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Cantidad\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell\">\n                  Precio\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell\">\n                  Caducidad\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden xl:table-cell\">\n                  Lote\n                </th>\n                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Alérgenos\n                </th>\n                <th className=\"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Acciones\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredInventory.map((item) => (\n                <tr key={item.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-3 py-2 whitespace-nowrap\">\n                    {editingItem === item.id ? (\n                      <>\n                        <input\n                          type=\"text\"\n                          name=\"ingredient_name\"\n                          value={editForm.ingredient_name}\n                          onChange={handleInputChange}\n                          className=\"w-full px-2 py-1 border rounded text-xs\"\n                        />\n                      </>\n                    ) : (\n                      <>\n                        <div className=\"text-xs font-medium text-gray-900\">{item.ingredients?.name || 'N/A'}</div>\n                        <div className=\"text-xs text-gray-500 md:hidden\">\n                          {item.inventory_families?.name} {item.inventory_subfamilies?.name ? `- ${item.inventory_subfamilies.name}` : ''}\n                        </div>\n                      </>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden md:table-cell\">\n                    {editingItem === item.id ? (\n                      <select\n                        name=\"family_id\"\n                        value={editForm.family_id}\n                        onChange={handleEditFamilyChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                      >\n                        <option value=\"\">Seleccionar familia</option>\n                        {families.map(family => (\n                          <option key={family.id} value={family.id}>{family.name}</option>\n                        ))}\n                      </select>\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">{item.inventory_families?.name || 'N/A'}</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden lg:table-cell\">\n                    {editingItem === item.id ? (\n                      <select\n                        name=\"subfamily_id\"\n                        value={editForm.subfamily_id}\n                        onChange={handleInputChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                        disabled={!editForm.family_id}\n                      >\n                        <option value=\"\">Seleccionar subfamilia</option>\n                        {subfamilies.map(subfamily => (\n                          <option key={subfamily.id} value={subfamily.id}>{subfamily.name}</option>\n                        ))}\n                      </select>\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">{item.inventory_subfamilies?.name || '-'}</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden md:table-cell\">\n                    {editingItem === item.id ? (\n                      <select\n                        name=\"supplier_id\"\n                        value={editForm.supplier_id}\n                        onChange={handleInputChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                      >\n                        <option value=\"\">Seleccionar proveedor</option>\n                        {suppliers.map(supplier => (\n                          <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                        ))}\n                      </select>\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">N/A</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap\">\n                    {editingItem === item.id ? (\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"number\"\n                          name=\"quantity\"\n                          value={editForm.quantity}\n                          onChange={handleInputChange}\n                          className=\"w-full px-2 py-1 border rounded text-xs\"\n                          min=\"0\"\n                          step=\"0.01\"\n                        />\n                        <div className=\"text-xs text-gray-500\">{item.ingredients?.unit_measure || 'N/A'}</div>\n                      </div>\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">{item.quantity} {item.ingredients?.unit_measure || 'N/A'}</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden sm:table-cell\">\n                    {editingItem === item.id ? (\n                      <input\n                        type=\"number\"\n                        name=\"purchase_price\"\n                        value={editForm.purchase_price}\n                        onChange={handleInputChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                        min=\"0\"\n                        step=\"0.01\"\n                      />\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">{item.purchase_price} €</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden lg:table-cell\">\n                    {editingItem === item.id ? (\n                      <input\n                        type=\"date\"\n                        name=\"expiry_date\"\n                        value={editForm.expiry_date}\n                        onChange={handleInputChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                      />\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">\n                        {new Date(item.expiry_date).toLocaleDateString()}\n                      </div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap hidden xl:table-cell\">\n                    {editingItem === item.id ? (\n                      <input\n                        type=\"text\"\n                        name=\"batch_number\"\n                        value={editForm.batch_number}\n                        onChange={handleInputChange}\n                        className=\"w-full px-2 py-1 border rounded text-xs\"\n                      />\n                    ) : (\n                      <div className=\"text-xs text-gray-900\">{item.batch_number}</div>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap\">\n                    {getAllergens(item)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-right text-xs font-medium\">\n                    {editingItem === item.id ? (\n                      <>\n                        <button \n                          onClick={handleSaveEdit}\n                          className=\"text-green-600 hover:text-green-900 mr-2\"\n                        >\n                          <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                          </svg>\n                        </button>\n                        <button \n                          onClick={handleCancelEdit}\n                          className=\"text-gray-600 hover:text-gray-900\"\n                        >\n                          <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      </>\n                    ) : (\n                      <>\n                        <button \n                          onClick={() => handleEdit(item)}\n                          className=\"text-indigo-600 hover:text-indigo-900 mr-2\"\n                        >\n                          <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                          </svg>\n                        </button>\n                        <button \n                          onClick={() => handleDelete(item.id)}\n                          className=\"text-red-600 hover:text-red-900\"\n                        >\n                          <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                          </svg>\n                        </button>\n                      </>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InventoryManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}